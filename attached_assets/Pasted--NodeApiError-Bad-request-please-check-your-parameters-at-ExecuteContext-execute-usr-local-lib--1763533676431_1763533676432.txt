
NodeApiError: Bad request - please check your parameters at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/HttpRequest/V3/HttpRequestV3.node.ts:858:16) at processTicksAndRejections (node:internal/process/task_queues:105:5) at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8) at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11) at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27 at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11

Error
Bad request - please check your parameters
API key not valid. Please pass a valid API key.
This is what it's saying in N8N when I do a test Webhook URL

Also I dont know what you mean by "Response Extraction:
After the HTTP REQUEST node, add a Set node to extract the AI response:

{
  "success": true,
  "response": "={{$json.candidates[0].content.parts[0].text}}"
}"

I already have another (last) node after it that's javascript and says "// Get AI response from Gemini
const geminiResponse = $input.first().json;
const previousData = $('Extract data').first().json; // Get data from first Code node

// Extract AI text from Gemini response
let aiText = '';
if (geminiResponse.candidates && geminiResponse.candidates[0]) {
  aiText = geminiResponse.candidates[0].content.parts[0].text;
}

// Format final response
return [{
  json: {
    success: true,
    response: aiText,
    personality: previousData.personality,
    modality: previousData.modality,
    messageId: previousData.messageId
  }
}];"